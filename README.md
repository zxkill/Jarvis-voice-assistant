# Jarvis-Pi — офлайн голосовой ассистент для Raspberry Pi

Jarvis-Pi — русскоязычный офлайн голосовой ассистент и эмоциональный робот. Он работает на Raspberry Pi, поддерживает локальное распознавание речи и синтез, интегрируется с Ollama для запуска LLM и выводит состояние на OLED через ESP32. Все вычисления происходят локально, что обеспечивает приватность и минимальные задержки.

## Возможности

- Активация по фразе «Джарвис» (Vosk)
- Натуральный синтез речи Piper
- Горячая перезагрузка скиллов
- Система эмоций valence–arousal и проактивные подсказки
- Управление через Telegram‑бот
- Отображение статуса на M5Stack Core ESP32 с OLED
- Интеграция с локальной LLM через Ollama
- Локальное хранение контекста и метрик
- Автоповорот и обзор камеры при отсутствии пользователя

## Требования к оборудованию

- Raspberry Pi 4 или новее
- USB‑микрофон и динамик
- Подключение к интернету для Telegram и LLM (опционально)
- (Необязательно) M5Stack Core ESP32 с OLED

## Установка

1. Установите Raspberry Pi OS и обновите систему.
2. Клонируйте репозиторий и установите зависимости:

```bash
git clone https://github.com/.../Jarvis-voice-assistant.git
cd Jarvis-voice-assistant
pip install -r requirements.txt
```

3. Скачайте модели Vosk и Piper в каталог `models/`.
4. Заполните `config.ini` и запустите ассистента:

```bash
python start.py
```

## Подключение ESP32 + OLED

Прошивка для M5Stack Core ESP32 находится в каталоге `JarvisM5/`. Задайте параметры Wi‑Fi в `include/Config.h` и прошейте устройство:

```bash
cd JarvisM5
pio run -t upload
```

## Автосканирование камеры

Если в кадре долго нет лица, ассистент включает плавное **автосканирование камеры** и затем «засыпает». Чтобы функция работала, активируйте модуль присутствия в `config.ini`:

```ini
[PRESENCE]
enabled = true
```

Камера поочерёдно оглядывает комнату, а появившийся человек или голосовая команда моментально возвращают её в рабочий режим.

## Создание своих скиллов

Добавьте Python‑файл в `skills/`:

```python
PATTERNS = ["привет", "здравствуй"]

def handle(text: str) -> str:
    return "Привет, создатель!"
```

Скилл подхватится автоматически после перезапуска.

## Тестирование

```bash
pytest --cov
```

## Roadmap и лицензия

- v0.5: ESP32 + OLED по Serial
- v1.0: интеграция с ROS и SLAM

Проект распространяется по лицензии MIT.

Ключевые слова: voice assistant, Raspberry Pi, offline, Telegram bot, LLM, M5Stack.
